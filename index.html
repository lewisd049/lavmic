<!DOCTYPE html>
<html>
<head>
  <title>Mic to Bluetooth</title>
</head>
<body>
  <h1>Mic Passthrough</h1>
  <button id="start">Start Mic</button>
  <button id="stop">Stop Mic</button>

  <script>
    let stream, source, context;

    document.getElementById("start").onclick = async () => {
      context = new (window.AudioContext || window.webkitAudioContext)();
      stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      source = context.createMediaStreamSource(stream);
      source.connect(context.destination);
    };

    document.getElementById("stop").onclick = () => {
      if (stream) {
        stream.getTracks().forEach(track => track.stop());
      }
      if (context) {
        context.close();
      }
    };
  </script>
</body>
</html>
